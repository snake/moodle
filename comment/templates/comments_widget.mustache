{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template core_comment/comments_widget

    Displays a comments widget

    Classes required for JS:
    * none

    Data attributes required for JS:
    * none

    Context variables required for this template:
    * none

    Example context (json):
    {
        "widgetid": 5894097884e37,
        "count": 42,
        "notoggle": false,
        "displaycancel": false,
        "comments": [
            {
                "id": 10,
                "content": "<div class=\"no-overflow\"><div class=\"text_to_html\">Test comment<\/div><\/div>",
                "format": 1,
                "timecreated": 1486258208,
                "strftimeformat": "%a, %d %b %Y, %I:%M %p",
                "profileurl": "http://localhost/master/user/view.php?id=2&course=1",
                "fullname": "Admin User",
                "time": "Sun, 5 Feb 2017, 9:30 AM",
                "profileimageurl": "http://localhost/master/theme/image.php/boost/core/1486161611/u/f1",
                "userid": 2,
                "delete": true
            }
        ]
    }
}}

<div class="mdl-left" data-region="comment-widget-{{widgetid}}">
    {{^notoggle}}
    <a class="comment-link {{#expanded}}collapsible{{/expanded}}{{^expanded}}collapsed{{/expanded}}"
       id="comment-link-{{widgetid}}" href="#" role="button" aria-expanded="{{#expanded}}true{{/expanded}}{{^expanded}}false{{/expanded}}">
        <!--img id="comment-img-{{widgetid}}" src="http://localhost/master/theme/image.php/boost/core/1486161611/t/collapsed" alt="" title=""-->
        <span id="comment-link-text-{{widgetid}}">{{#str}}comments, moodle{{/str}} (<span id="comment-widget-count-{{widgetid}}">{{count}}</span>)</span>
    </a>
    {{/notoggle}}
    <div class="w-100 text-center p-3 hidden" data-region="loading-icon-container" >
        {{> core/loading }}
    </div>
    <div id="comment-ctrl-{{widgetid}}" class="comment-ctrl {{^expanded}}hidden{{/expanded}}">

        <ul id="comment-list-{{widgetid}}" class="comment-list">
            {{#comments}}
                {{> comment/comment_list_item}}
            {{/comments}}
        </ul>
        <div id="comment-pagination-{{widgetid}}" class="comment-pagination">
            <div class="comment-paging">
            {{#pages}}
                <a href="#" data-pagenum="{{number}}" aria-role="button" class="{{#iscurrent}}curpage{{/iscurrent}}{{^iscurrent}}pageno{{/iscurrent}}">{{number}}</a>
            {{/pages}}
            </div>
        </div>
        <div class="comment-area">
            <div class="db">
                <textarea name="content" rows="2" id="dlg-content-{{widgetid}}" cols="20" placeholder="{{#str}}addcomment, moodle{{/str}}"></textarea>
            </div>
            <div class="fd" id="comment-action-{{widgetid}}">
                <a id="comment-action-post-{{widgetid}}" href="#">{{#str}}savecomment, moodle{{/str}}</a>
                {{#displaycancel}}
                    <span> | </span>
                    <a id="comment-action-cancel-{{widgetid}}" href="">{{#str}}cancel, moodle{{/str}}</a>
                {{/displaycancel}}

            </div>
        </div>
        <div class="clearer"></div>
    </div>
</div>
