define ("enrol_lti/content_select",["exports"],function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;function b(a,b,c){function d(a,b){var c=g(a)[0]||a;c.tabIndex=b}function e(a,b){var c=j(a),e=c.length;while(e--){d(c[e],b)}}function f(){var b=a.querySelectorAll("tbody > tr");return Array.prototype.slice.call(b)}function g(a){var b=a.querySelectorAll("a,button,input,td>[tabindex]");return Array.prototype.slice.call(b)}function h(a,b){var c=g(a),d=c.length;while(d--){c[d].tabIndex=b}}function i(){var b=a.querySelectorAll("tbody > tr:not([class~=\"hidden\"])");return Array.prototype.slice.call(b)}function j(a){var b=a.getElementsByTagName("td");return Array.prototype.slice.call(b)}function k(a,b){if(0>a){return 0}return a>=b?a-1:a}function l(a){a.tabIndex=0;a.focus()}function m(a){var b=g(a);l(b[0]||a)}function n(c){var d=c.target!==window&&a.contains(c.target)&&c.target,e=o.tabbingRow;if(e){o(!1,e)}if(b&&n.prevTreeGridFocus&&"td"===n.prevTreeGridFocus.localName){n.prevTreeGridFocus.removeAttribute("tabindex")}if(d){if(e){e.tabIndex=-1}var f=p();if(f){f.tabIndex=0;o(!0,f)}}n.prevTreeGridFocus=d}function o(a,b){if(b){h(b,a?0:-1);if(a){o.tabbingRow=b}else{if(o.tabbingRow===b){o.tabbingRow=null}}}}function p(){return q(document.activeElement)}function q(b){var c=b;if(a.contains(c)){while(c!==a){if("tr"===c.localName){return c}c=c.parentElement}}}function r(){return p()===document.activeElement}function s(){var a=document.activeElement;return"input"===a.localName&&"checkbox"!==a.type}function t(a){if(a){var b=document.activeElement;if(a.contains(b)){while(b!==a){if("td"===b.localName){return b}b=b.parentElement}}}}function u(a){return a&&parseInt(a.getAttribute("aria-level"))}function v(a,b){var c=p(),d=b&&c&&u(c)+a,e=i(),f=e.length,g=c?e.indexOf(c):-1,h=b&&1===a?1:NaN;do{if(0==h--){return}g=k(g+a,f)}while(d&&d!==u(e[g]));if(!w(c,e[g])){l(e[g])}}function w(a,b){var c=t(a);if(!c){return}var d=j(a),e=d.indexOf(c);if(0>e){return}var f=j(b);m(f[e]);return!0}function x(a){var b=p();if(!b){return}var c=t(b);if(c){z(a,b)}else{A(a)}}function y(a){var c=p();if(!c){return}var d=j(c),e=d.length,f=t(c),g=d.indexOf(f),h=f||0>a?g+a:0;if(b&&0>h){l(c);return}h=k(h,e);m(d[h])}function z(a,b){var c=j(b),d=0>a?0:c.length-1;m(c[d])}function A(a){var b=i(),c=b[0<a?b.length-1:0];if(!w(p(),c)){l(c)}}function B(){var a=p();if(!a){return}if(a===document.activeElement){alert("Message from "+a.children[2].innerText+":\n\n"+a.children[1].innerText);return}C(a)}function C(a){var b=j(a),c=t(a);if(c===b[0]&&H(a)){D(!I(a),a)}}function D(a,b){var c=b||p();if(!c){return}var d=u(c),e=f(),g=e.indexOf(c),h,i=[];i[d+1]=a;while(++g<e.length){var j=e[g],k=u(j);if(k<=d){break}i[k+1]=i[k]&&I(j);var l=!i[k],m=j.classList.contains("hidden");if(l!==m){if(l){j.classList.add("hidden")}else{j.classList.remove("hidden")}h=!0}}if(h){G(c,a);return!0}}function E(a){var b=a.getAttribute("aria-expanded"),c=j(a)[0];if(b){c.setAttribute("aria-expanded",b);a.removeAttribute("aria-expanded")}}function F(a){return b?a:j(a)[0]}function G(a,b){var c=F(a);c.setAttribute("aria-expanded",b);if(b){c.classList.add("expanded");c.classList.remove("collapsed")}else{c.classList.remove("expanded");c.classList.add("collapsed")}}function H(a){var b=F(a);return b.hasAttribute("aria-expanded")}function I(a){var b=F(a);return"true"===b.getAttribute("aria-expanded")}(function(){h(a,-1);var g=f(),i=g.length,k=c?0:-1;while(i--){if(b){g[i].tabIndex=i===k?0:-1}else{e(g[i],-1);E(g[i])}}if(c){return}var l=j(g[0])[0];d(l)})();a.addEventListener("keydown",function(a){var b=36,c=35,d=a.ctrlKey+a.altKey+a.shiftKey+a.metaKey,e=a.keyCode;if(1===d&&a.ctrlKey){e=-e}else if(d){return}switch(e){case 40:v(1);break;case 38:v(-1);break;case 37:if(s()){return}if(r()){D(!1)||v(-1,!0)}else{y(-1)}break;case 39:if(s()){return}if(!r()||!D(!0)){y(1)}break;case-b:A(-1);break;case b:if(s()){return}x(-1);break;case-c:A(1);break;case c:if(s()){return}x(1);break;case 13:B();break;default:return;}a.preventDefault()});a.addEventListener("click",function(a){var b=a.target;if("td"!==b.localName){return}var c=q(a.target);if(!H(c)){return}var d=document.createRange();d.selectNodeContents(b.firstChild);var e=d.getBoundingClientRect().left;if(a.clientX<e&&a.clientX>e-20){D(!I(c),c)}});a.addEventListener("dblclick",function(a){var b=q(a.target);if(b){if(H(b)){D(!I(b),b)}a.preventDefault()}});window.addEventListener(window.onfocusin?"focusin":"focus",n,!0)}a.init=function init(){return new b(document.querySelector("#treegrid"),!1,!1)}});
//# sourceMappingURL=content_select.min.js.map
