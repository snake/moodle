function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&null!=g["return"])g["return"]()}finally{if(e)throw f}}return c}function _arrayWithHoles(a){if(Array.isArray(a))return a}define ("tool_moodlenet/instance_form",["tool_moodlenet/validator","tool_moodlenet/selectors","core/loadingicon","core/templates","core/notification","jquery"],function(a,b,c,d,e,f){var g=function(d,e){d.addEventListener("click",function(f){if(f.target.matches(b.action.browse)){window.location=e}if(f.target.matches(b.action.submit)){var g=d.querySelector("[data-var=\"mnet-link\"]"),h=d.querySelector(b.region.spinner),i=document.querySelector(b.region.validationArea);h.classList.remove("d-none");var j=c.addIconToContainerWithPromise(h);a.validation(g).then(function(a){j.resolve();h.classList.add("d-none");if(a.result){g.classList.remove("is-invalid");g.classList.add("is-valid");i.innerText=a.message;i.classList.remove("text-error");i.classList.add("text-success");setTimeout(function(){window.location=a.domain},1e3)}else{g.classList.add("is-invalid");i.innerText=a.message;i.classList.add("text-error")}}).catch()}})},h=function(a,b,h,i){a.innerHTML="";var j=c.addIconToContainer(a),k=null,l=new Promise(function(a){k=a});f.when(d.render("tool_moodlenet/chooser_moodlenet",b),j,l).then(function(b){var c=_slicedToArray(b,2),e=c[0],f=c[1];d.replaceNodeContents(a,e,f)}).catch(e.exception);g(a,b.generic);h.one("slid.bs.carousel",function(){k()});h.carousel(2);i.setFooter(d.render("tool_moodlenet/chooser_footer_close_mnet",{}))},i=function(a,b,c){a.carousel(0);b.setFooter(d.render(c.customfootertemplate,c))},j=function(a,b,c){if(!0===a.enabled){a.courseID=b;a.sectionID=c}return a};return{init:function(a){var c=document.querySelector(b.region.instancePage);g(c,a)},chooserNavigateToMnet:h,chooserNavigateFromMnet:i,chooserFooterLogic:j,footerDataBuilder:function footerDataBuilder(a,b,c){if(!0===a.installed){return j(a,b,c)}else{return a}},footerClickListener:function footerClickListener(a,c,d){if(a.target.matches(b.action.showMoodleNet)||a.target.closest(b.action.showMoodleNet)){a.preventDefault();var e=f(d.getBody()[0].querySelector(b.region.carousel)),g=e.find(b.region.moodleNet)[0];h(g,c,e,d)}if(a.target.matches(b.action.closeOption)){var j=f(d.getBody()[0].querySelector(b.region.carousel));i(j,d,c)}}}});
//# sourceMappingURL=instance_form.min.js.map
